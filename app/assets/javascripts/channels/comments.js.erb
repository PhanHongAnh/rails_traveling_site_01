$(document).ready(function() {
  reviewId = $('input#comment_review_id').val();
  userId = $('input#comment_user_id').val();
  App.comments = App.cable.subscriptions.create({channel: 'CommentsChannel',
    review_id: reviewId}, {
    received: function(data) {
      $('.box-clear').val('');
      if (data.type=="Review") {
        $("#comments_review").removeClass('hidden')
        return $('#comments_review').append(this.renderComment(data));
      } else
      {
        $(".comments_comment".concat(data.comment_id)).removeClass('hidden')
        return $(".comments_comment".concat(data.comment_id)).append(this.renderComment(data));
      }
    },
    review_id: function(data) {
      return data.review_id
    },
    renderComment: function(data) {
      if (data.comment.includes("user".concat($('input#comment_user_id').val()))) {
        return data.comment
      }
      else return data.comment_other;
    }
  });
})
